{% schema %}
{
  "name": "Related Products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You may also like"
    }
  ],
  "presets": [
    {
      "name": "Related Products (Metafield)"
    }
  ]
}
{% endschema %}

{% if product.metafields.custom.related_products.value != blank %}
<section class="related-products-metafield">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="related-title">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="related-grid">
      {% for related_product in product.metafields.custom.related_products.value %}
        {% render 'card-product', card_product: related_product %}
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

<style>
.related-products-metafield {
  padding: 80px 0;
  background: #fff;
}

.related-products-metafield .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 2rem;
}

.related-products-metafield .related-title {
  font-size: 28px;
  font-weight: 500;
  margin-bottom: 2rem;
  text-align: center;
}

.related-products-metafield .related-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
}
</style>
